/*! angularjs-google-places 12-02-2014 */
"use strict";angular.module("ngGPlaces",[]),angular.module("ngGPlaces").value("gPlaces",google.maps.places),angular.module("ngGPlaces").value("gMaps",google.maps),angular.module("ngGPlaces").provider("ngGPlacesAPI",function(){var a={radius:1e3,sensor:!1,latitude:null,longitude:null,map:null,elem:null,textSearchKeys:["formatted_address","geometry","html_attributions","icon","id","name","opening_hours","rating","reference","types","vicinity"],nearbySearchKeys:["name","reference","vicinity"],placeDetailsKeys:["formatted_address","formatted_phone_number","reference","website"],textSearchErr:"Unable to find by text",nearbySearchErr:"Unable to find nearby places",placeDetailsErr:"Unable to find place details",_textSearchApiFnCall:"textSearch",_nearbySearchApiFnCall:"nearbySearch",_placeDetailsApiFnCall:"getDetails"},b=function(b){var c=[],d=a.nearbySearchKeys;return b.map(function(a){var b={};angular.forEach(d,function(c){b[c]=a[c]}),c.push(b)}),c},c=function(b){var c=[],d=a.textSearchKeys;return b.map(function(a){var b={};angular.forEach(d,function(c){b[c]=a[c]}),c.push(b)}),c},d=function(b){var c={},d=a.placeDetailsKeys;return angular.forEach(d,function(a){c[a]=b[a]}),c};this.$get=function(e,f,g,h,i){function j(b){function c(a,b){e.$apply(b==h.PlacesServiceStatus.OK?function(){return l.resolve(d._parser(a))}:function(){l.reject(d._errorMsg)})}var d=angular.copy(a,{});angular.extend(d,b);var j,k,l=f.defer();return d._genLocation&&(d.location=new g.LatLng(d.latitude,d.longitude)),j=d.map?d.map:d.elem?d.elem:i.document.createElement("div"),k=new h.PlacesService(j),k[d._apiFnCall](d,c),l.promise}return{getDefaults:function(){return a},nearbySearch:function(c){return c._genLocation=!0,c._errorMsg=a.nearbySearchErr,c._parser=b,c._apiFnCall=a._nearbySearchApiFnCall,j(c)},textSearch:function(b){return b._genLocation=!0,b._errorMsg=a.textSearchErr,b._parser=c,b._apiFnCall=a._textSearchApiFnCall,j(b)},placeDetails:function(b){return b._errorMsg=a.placeDetailsErr,b._parser=d,b._apiFnCall=a._placeDetailsApiFnCall,j(b)}}},this.$get.$inject=["$rootScope","$q","gMaps","gPlaces","$window"],this.setDefaults=function(b){angular.extend(a,b)}});